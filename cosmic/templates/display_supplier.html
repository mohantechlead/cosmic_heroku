{% extends 'cosmic_base.html' %}

{% block content %}

  <strong>
    <h3 style="margin: 50px;">Supplier Details</h3>
  </strong>
 
 
  <br>
  <br>

  <div class="container">
  <table class="table table-striped table-bordered" style="margin-top: 20px;" id="example">
    <thead>
    <tr>
      <th>Supplier Name</th>
      <th>Phone Number</th>
      <th>Email</th>
      <th>Creation Date</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    {% for supplier in my_supplier %}
    <tr>
      <!-- <td><a href="#" class="order-link" data-order-id="{{ order.PR_no }}">{{ order.PR_no }}</a></td>
       -->
       <!-- <td><a href="#" class="order-link" data-order-id="{{ customer.customer_name }}">{{ customer.customer_id }}</a></a></td> -->
       <td><a href="/cosmic/display_supplier_profile/{{supplier.supplier_name}}" >{{ supplier.supplier_name }}</a></td>
      <td><a href="#">{{ supplier.phone_number }}</a></td>
      <td><a href="#" >{{ supplier.email }}</a></td>
      <td><a href="#">{{ supplier.created_at }}</a></td>
      <td><button type="submit" class="btn btn-danger delete-link"  onclick="return confirm('Are you sure?');" data-order-id="{{ supplier.supplier_name }}" >Delete</button></td>  
    </tr>
    {% endfor %}
  </tbody>
  </table>

  
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
      const orderLinks = document.querySelectorAll('.order-link');
      const deleteLinks = document.querySelectorAll('.delete-link');
      console.log("p1")

      orderLinks.forEach(function (link) {
          link.addEventListener('click', function (event) {
              event.preventDefault();
              console.log("p2")
              const orderID = this.getAttribute('data-order-id');
              window.location.href = `/cosmic/display_supplier_profile?supplier_name=${orderID}`;
          });
      });

      deleteLinks.forEach(function (link) {
          link.addEventListener('click', function (event) {
              event.preventDefault();
              console.log("p2")
              const name = this.getAttribute('data-order-id');
              console.log(name,"name")
              window.location.href = `/cosmic/delete_supplier_profile?supplier_name=${name}`;
          });
        });
  });

 

</script>


{% endblock %}